
(function(){startGratiiSession("Mutant Space Crabs");var canvas=document.getElementById('spaceCanvas'),ctx=canvas.getContext('2d'),score=0,hiScore=20,gratii=0,health=3,level=1,rightKey=false,leftKey=false,upKey=false,downKey=false,input={left:false,right:false},touchDevice=false,gameOver=false,splashScreen=true,instructionScreen=false,splashScreenNumber=1,coinStartX=50,coinStartY=100,coinNewY="";topUIHeight=35;canvas.width=320;canvas.height=430;function checkButtonRectCollision(clickX,clickY,x1,y1,width,height){var y2=y1+height;var x2=x1+width;if(clickX>x1&&clickX<x2&&clickY>y1&&clickY<y2){return true;}else{return false;}}
function startMoving(clickX,clickY){if(checkButtonRectCollision(clickX,clickY,0,0,72,topUIHeight)==true)
quitGame();if(checkButtonRectCollision(clickX,clickY,0,topUIHeight,canvas.width/2-10,canvas.height)==true)
leftTouch=true;if(checkButtonRectCollision(clickX,clickY,canvas.width/2+10,topUIHeight,canvas.width/2-10,canvas.height)==true)
rightTouch=true;}
function quitGame(){exitGame();}
function stopMoving(clickX,clickY){leftTouch=false;rightTouch=false;}
function startGame(clickX,clickY){if(clickX==9999&&clickY==9999){if(splashScreenNumber==2){instructionScreen=false;splashScreen=false;splashScreenNumber==0;}
if(splashScreenNumber==1){instructionScreen=true;splashScreenNumber++;}}
if(clickX!=9999&&clickY!=9999){if(instructionScreen==false){if((clickX>=canvas.width/2)&&(clickY>=370)){instructionScreen=true;splashScreenNumber++;}else{instructionScreen=false;splashScreen=false;splashScreenNumber==0;}}else if(instructionScreen==true){instructionScreen=false;splashScreen=false;splashScreenNumber==0;}}}
canvas.addEventListener('touchstart',startHandler,true);function startHandler(e){touchDevice=true;var click={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(splashScreen==true){startGame(click.x,click.y);}else if(splashScreen==false){startMoving(click.x,click.y);}}
canvas.addEventListener('touchend',endHandler,true);function endHandler(e){stopMoving();}
document.addEventListener('keydown',keyDown,false);document.addEventListener('keyup',keyUp,false);function keyDown(e){if(splashScreen==true){startGame(9999,9999);}else if(splashScreen==false){if(e.keyCode==39)rightKey=true;else if(e.keyCode==37)leftKey=true;else if(e.keyCode==38)upKey=true;}}
function keyUp(e){if(e.keyCode==39)rightKey=false;else if(e.keyCode==37)leftKey=false;else if(e.keyCode==38)upKey=false;}
var draw={clear:function(){ctx.clearRect(0,0,canvas.width,canvas.height);},rect:function(x,y,w,h,col){ctx.fillStyle=col;ctx.fillRect(x,y,w,h);},circle:function(x,y,radius,col){ctx.fillStyle=col;ctx.beginPath();ctx.arc(x,y,radius,0,Math.PI*2,true);ctx.closePath();ctx.fill();},text:function(str,x,y,size,col){ctx.font='bold '+size+'px '+'verdana';ctx.fillStyle=col;ctx.fillText(str,x,y);}};var Ship=function(){this.init=function(){this.dead=false;this.speed=5;this.history=[];this.x=(canvas.width/2)-8;this.y=canvas.height*.8;this.w=60;this.h=46;this.sprite=new Image();this.sprite.src='images-space/ship-large.png';this.hitSprite=new Image();this.hitSprite.src='images-space/ship-large-hit.png';this.srcX=0;this.srcY=0;this.isHit=false;this.hitFrameCount=0;};this.move=function(){this.left=this.x;this.right=this.x+this.w;this.top=this.y;this.bottom=this.y+this.h;if(this.dead){return;}
if(touchDevice==false){if(rightKey){this.x+=this.speed;this.srcX=120;b1.bulletOffset+=4;}else if(leftKey){this.x-=this.speed;this.srcX=0;b1.bulletOffset-=4;}
if(rightKey==false&&leftKey==false){this.srcX=60;}}
if(touchDevice==true){if(rightTouch==false&&leftTouch==false){this.srcX=60;}
if(leftTouch==true){this.x-=this.speed;this.srcX=0;b1.bulletOffset-=4;}
if(rightTouch==true){this.x+=this.speed;this.srcX=120;b1.bulletOffset+=4;}}
if(this.x<0){this.x=0;}else if(this.x>(canvas.width-this.w)){this.x=(canvas.width-this.w);}};this.draw=function(){if(this.dead){return;}
var i,offset,segPos,col;if(this.isHit==false){ctx.drawImage(this.sprite,this.srcX,this.srcY,this.w,this.h,this.x,this.y,this.w,this.h);}else if(this.isHit==true){ctx.drawImage(this.hitSprite,this.srcX,this.srcY,this.w,this.h,this.x,this.y,this.w,this.h);this.hitFrameCount+=1;if(this.hitFrameCount>=6){this.isHit=false;this.hitFrameCount=0;}}};this.collides=function(obj){this.Cbottom=this.bottom;this.Ctop=this.top;this.Cright=this.right+10;this.Cleft=this.left-10;obj.left=obj.x;obj.right=obj.x+obj.w;obj.top=obj.y;obj.bottom=obj.y+obj.h;if(this.Cbottom<obj.top){return false;}
if(this.Ctop>obj.bottom){return false;}
if(this.Cright<obj.left){return false;}
if(this.Cleft>obj.right){return false;}
return true;};this.levelUp=function(){if(level==1){this.speed=5;}else if(level==2){this.speed=5.5;}else if(level==3){this.speed=6;}else if(level==4){this.speed=6.5;}else if(level>=5){this.speed=7;}};};var GratiiCoin=function(){this.x=coinStartX;this.y=coinStartY;this.x=0;this.y=0;this.w=25;this.h=26;this.replace=0;this.speed=1.2;coinImage=new Image();coinImage.src="images-space/gratiicoin25b.png";this.draw=function(){if(this.replace===0){this.relocate();}
if(this.y>canvas.height){this.relocate();}
coinNewY=coinStartY;this.y+=this.speed;ctx.drawImage(coinImage,this.x,this.y);this.replace-=1;};this.respawn=function(){this.x=coinStartX;this.y=coinStartY;this.replace=Math.floor(Math.random()*200)+1200;};this.relocate=function(){this.x=-100;this.y=-100;this.replace=Math.floor(Math.random()*200)+1200;};this.levelUp=function(){if(level==1){this.speed=3.0;}else if(level==2){this.speed=3.0;}else if(level==3){this.speed=4.0;}else if(level==4){this.speed=5.0;}else if(level>=5){this.speed=6.0;}};};var ScrollingBackground=function(){this.w=320;this.h=860;this.x=0;this.y=0;this.speed=.6;this.init=function(){this.image=new Image();this.image.src="images-space/scrolling-background.png";};this.draw=function(){if(this.y<860){this.y+=this.speed;ctx.drawImage(this.image,this.x,this.y-860);ctx.drawImage(this.image,this.x,this.y);}else if(this.y>=860){ctx.drawImage(this.image,this.x,this.y-860);this.y=0;}};};var Stars=function(){this.yPositions=[];this.xPositions=[];this.globalAlphas=[];this.starSizes=[];this.image;this.speed=.2;this.init=function(){this.image=new Image();this.image.src="images-space/star.png";for(i=0;i<10;i++){this.currentStarSize=(Math.floor((Math.random()*2)+1));this.yPositions.push(Math.random()*400);this.xPositions.push(Math.random()*320);this.starSizes.push(Math.floor((Math.random()*2)+1));if(this.currentStarSize<=1){this.globalAlphas.push(Math.floor((Math.random()*33))/100);}else if(this.currentStarSize>1&&this.currentStarSize<=2){this.globalAlphas.push((Math.floor((Math.random()*33))+33)/100);}else if(this.currentStarSize>2){this.globalAlphas.push((Math.floor((Math.random()*34))+66)/100);}}};this.draw=function(){this.currentStarNumber=0;this.numberOfStars=this.xPositions.length;this.starDensity=2*this.speed;if(Math.random()<this.starDensity/40)
{this.currentStarSize=(Math.floor((Math.random()*2)+1));this.yPositions.push(0);this.xPositions.push(Math.random()*320);this.starSizes.push(Math.floor((Math.random()*2)+1));if(this.currentStarSize<=1){this.globalAlphas.push(Math.floor((Math.random()*33))/100);}else if(this.currentStarSize>1&&this.currentStarSize<=2){this.globalAlphas.push((Math.floor((Math.random()*33))+33)/100);}else if(this.currentStarSize>2){this.globalAlphas.push((Math.floor((Math.random()*34))+66)/100);}}
while(this.currentStarNumber<this.numberOfStars){this.yPositions[this.currentStarNumber]=this.yPositions[this.currentStarNumber]+this.speed;this.currentStarNumber+=1;}
this.currentStarNumber=0;while(this.currentStarNumber<this.numberOfStars){ctx.globalAlpha=this.globalAlphas[this.currentStarNumber];draw.circle(this.xPositions[this.currentStarNumber],this.yPositions[this.currentStarNumber],this.starSizes[this.currentStarNumber],"#eeeeee");ctx.globalAlpha=1;this.currentStarNumber=this.currentStarNumber+1;}
this.currentStarNumber=0;while(this.currentStarNumber<this.numberOfStars){this.currentStarNumber=this.currentStarNumber+1;}};};var Enemies=function(){this.yPositions=[];this.xPositions=[];this.xDirections=[];this.image;this.speed=3;this.xSpeed=3;this.enemyDensity=1;this.init=function(){this.image=new Image();this.image.src="images-space/enemycrab1.png";this.image2=new Image();this.image2.src="images-space/enemycrab2.png";this.image3=new Image();this.image3.src="images-space/enemycrab3.png";this.image4=new Image();this.image4.src="images-space/enemycrab4.png";this.image5=new Image();this.image5.src="images-space/enemycrab5.png";this.currentImage=this.image;this.bulletNumber=0;};this.draw=function(){this.enemyNumber=0;this.totalEnemies=this.xPositions.length;if(Math.random()<this.enemyDensity/40)
{this.yPositions.push(-50);this.xPositions.push(Math.random()*400);this.xDirections.push((Math.random()*2)-1);}
while(this.enemyNumber<this.totalEnemies){this.yPositions[this.enemyNumber]=this.yPositions[this.enemyNumber]+this.speed;this.xPositions[this.enemyNumber]=this.xPositions[this.enemyNumber]+this.xSpeed*this.xDirections[this.enemyNumber];ctx.drawImage(this.currentImage,this.xPositions[this.enemyNumber],this.yPositions[this.enemyNumber]);this.enemyNumber=this.enemyNumber+1;}
this.enemyNumber=0;this.collisionDetection();};this.collisionDetection=function(){if(p1.dead==false){while(this.enemyNumber<this.totalEnemies){this.x=this.xPositions[this.enemyNumber];this.y=this.yPositions[this.enemyNumber];this.w=30;this.h=20;this.left=this.x;this.right=this.x+this.w;this.top=this.y;this.bottom=this.y+this.h;if(((p1.left<this.left&&this.left<p1.right)||(this.left<p1.left&&p1.left<this.right))&&((p1.top<this.top&&this.top<p1.bottom)||(this.top<p1.top&&p1.top<this.bottom)))
{this.xPositions.splice(this.enemyNumber,1);this.yPositions.splice(this.enemyNumber,1);this.xDirections.splice(this.enemyNumber,1);health-=1;p1.isHit=true;}
if(this.y>canvas.height){this.xPositions.splice(this.enemyNumber,1);this.yPositions.splice(this.enemyNumber,1);this.xDirections.splice(this.enemyNumber,1);}
this.enemyNumber+=1;}}};this.levelUp=function(){if(level==1){this.speed=3.5;this.xSpeed=.2;this.enemyDensity=1;if(this.currentImage.src!=this.image){this.currentImage=this.image;}}else if(level==2){this.speed=4.0;this.xSpeed=1;this.enemyDensity=1.5;if(this.currentImage.src!=this.image2){this.currentImage=this.image2;}}else if(level==3){this.speed=4.5;this.xSpeed=2;this.enemyDensity=2;if(this.currentImage.src!=this.image3){this.currentImage=this.image3;}}else if(level==4){this.speed=3.0;this.xSpeed=3;this.enemyDensity=2.5;if(this.currentImage.src!=this.image4){this.currentImage=this.image4;}}else if(level>=5){this.speed=5.5;this.xSpeed=4;this.enemyDensity=3;if(this.currentImage.src!=this.image5){this.currentImage=this.image5;}}};};var Bullets=function(){this.yPositions=[];this.xPositions=[];this.xDirections=[];this.w=6;this.h=6;this.velocity=10;this.firingInterval=6;this.bulletFrame=0;this.firing=true;this.init=function(){this.image=new Image();this.image.src="images-space/bullet1.png";this.image2=new Image();this.image2.src="images-space/bullet2.png";this.image3=new Image();this.image3.src="images-space/bullet3.png";this.image4=new Image();this.image4.src="images-space/bullet4.png";this.image5=new Image();this.image5.src="images-space/bullet5.png";this.currentImage=this.image;};this.reset=function(){this.yPositions=[];this.xPositions=[];b1.firing=true;};this.kill=function(){this.yPositions=[];this.xPositions=[];this.firing=false;}
this.draw=function(){if(this.firing==true){this.bulletNumber=0;this.totalBullets=this.xPositions.length;this.bulletFrame+=1;if(this.bulletFrame>this.firingInterval)
{this.yPositions.push(p1.y-4);this.xPositions.push(p1.x+(p1.w-20)/2+this.bulletOffset);this.bulletFrame=0;}}};this.move=function(){if(this.firing==true){while(this.bulletNumber<this.totalBullets){this.yPositions[this.bulletNumber]=this.yPositions[this.bulletNumber]-this.velocity;this.xPositions[this.bulletNumber]=this.xPositions[this.bulletNumber]
this.bulletNumber=this.bulletNumber+1;}
this.bulletNumber=0;while(this.bulletNumber<this.totalBullets){ctx.drawImage(this.currentImage,this.xPositions[this.bulletNumber],this.yPositions[this.bulletNumber]);this.bulletNumber=this.bulletNumber+1;}
this.bulletNumber=0;}
this.collides();};this.collides=function(){this.enemyNumber=0;while(this.enemyNumber<e1.totalEnemies){this.x=e1.xPositions[this.enemyNumber];this.y=e1.yPositions[this.enemyNumber];this.bulletNumber=0;while(this.bulletNumber<this.totalBullets){if(((this.xPositions[this.bulletNumber]<this.x&&this.x<this.xPositions[this.bulletNumber]+this.w)||(this.x<this.xPositions[this.bulletNumber]&&this.xPositions[this.bulletNumber]<this.x+30))&&((this.yPositions[this.bulletNumber]<this.y&&this.y<this.yPositions[this.bulletNumber]+33)||(this.y<this.yPositions[this.bulletNumber]&&this.yPositions[this.bulletNumber]<this.y+30))){if(((score+1)%5)==0&&score!=0){coinStartX=this.x;coinStartY=this.y;gratiicoin.respawn();}
this.xPositions.splice(this.bulletNumber,1);this.yPositions.splice(this.bulletNumber,1);e1.xPositions.splice(this.enemyNumber,1);e1.yPositions.splice(this.enemyNumber,1);score+=1;if(score==100){health+=1;}}
this.bulletNumber+=1;}
this.enemyNumber+=1;}
this.bulletNumber=0;while(this.bulletNumber<this.totalBullets){if(this.yPositions[this.bulletNumber]<0){this.xPositions.splice(this.bulletNumber,1);this.yPositions.splice(this.bulletNumber,1);}
this.bulletNumber+=1;}
this.currentEnemyNumber=this.currentEnemyNumber+1;};this.levelUp=function(){if(level==1){this.w=6;this.h=6;this.bulletOffset=5;this.velocity=6;this.firingInterval=18;if(this.currentImage.src!=this.image){this.currentImage=this.image;}}else if(level==2){this.w=10;this.h=10;this.bulletOffset=0;this.velocity=10;this.firingInterval=14;if(this.currentImage.src!=this.image2){this.currentImage=this.image2;}}else if(level==3){this.w=20;this.h=20;this.bulletOffset=0;this.velocity=16;this.firingInterval=10;if(this.currentImage.src!=this.image3){this.currentImage=this.image3;}}else if(level==4){this.w=20;this.h=20;this.bulletOffset=0;this.velocity=22;this.firingInterval=9;if(this.currentImage.src!=this.image4){this.currentImage=this.image4;}}else if(level>=5){this.w=20;this.h=20;this.bulletOffset=0;this.velocity=24;this.firingInterval=8;if(this.currentImage.src!=this.image5){this.currentImage=this.image5;}}};};var Grenade=function(){this.yPositions=[];this.xPositions=[];this.init=function(){this.firing=false;this.firedonce=false;this.speed=.2;this.color="#FFFFFF";this.w=4;this.h=4;this.x=p1.x+p1.w/2-this.w/2;this.y=p1.y-this.h/4;this.live=false;this.throwDistance=Math.floor((Math.random()*200)+50);};this.reset=function(){this.x=p1.x+p1.w/2-this.w/2;this.y=p1.y-3;level=1;this.live=false;this.exploded=false;this.firing=false;this.throwDistance=Math.floor((Math.random()*200)+50);};this.resetXY=function(){this.x=p1.x+p1.w/2-this.w/2;this.y=p1.y-this.h/4;}
this.reloadGrenade=function(){this.firing=false;this.firedonce=false;this.live=false;this.throwDistance=Math.floor((Math.random()*120)+50);this.resetXY();};this.draw=function(lvl){if(this.y<=this.throwDistance&&this.firedonce==true&&this.live==false&&this.exploding==true){this.enemyNumber=0;this.currentX=this.x-this.w*1.7;this.currentY=this.y-this.h*1.7;this.currentW=this.w*3.4;this.currentH=this.h*3.4;while(this.enemyNumber<e1.totalEnemies){if(((this.currentX<e1.xPositions[this.enemyNumber]&&e1.xPositions[this.enemyNumber]<this.currentX+this.currentW)||(e1.xPositions[this.enemyNumber]<this.currentX&&this.currentX<e1.xPositions[this.enemyNumber]+30))&&((this.currentY<e1.yPositions[this.enemyNumber]&&e1.yPositions[this.enemyNumber]<this.currentY+this.currentW)||(e1.yPositions[this.enemyNumber]<this.currentY&&this.currentY<e1.yPositions[this.enemyNumber]+30))){e1.xPositions.splice(this.enemyNumber,1);e1.yPositions.splice(this.enemyNumber,1);score+=1;}
this.enemyNumber+=1;}
draw.circle(this.x,this.y,this.w*2,this.color);draw.rect(this.x-this.w*1.7,this.y-this.h*1.7,this.w*3.4,this.h*3.4,this.color);this.reloadGrenade();}
if(this.live==true){if(lvl==1){ctx.globalAlpha=.4;draw.rect(this.x,this.y,this.w,this.h,this.color);ctx.globalAlpha=1;}else if(lvl>=2){ctx.globalAlpha=.4;draw.circle(this.x+this.w/2,this.y,this.w/2,this.color);ctx.globalAlpha=1;}}};this.move=function(){if(this.live==false){this.resetXY();}
if(this.live==true){if(this.y>this.throwDistance){this.y-=this.speed;}}};this.explode=function(){this.exploding=true;};this.levelUp=function(){if(level==1){this.speed=4;this.color="#FF9933";this.w=20;this.h=20;}else if(level==2){this.speed=5;this.color="#FFFF00";this.w=30;this.h=30;}else if(level==3){this.speed=6;this.color="#00FF00";this.w=40;this.h=40;}else if(level==4){this.speed=6;this.color="#FF4719";this.w=45;this.h=45;}else if(level>=5){this.speed=6;this.color="#FFD119";this.w=50;this.h=50;}};this.fire=function(){if(upKey){grenade1.firing=true;grenade1.firedonce=true;}else if(upKey==false){grenade1.firing=false;}
if(grenade1.firing==true&&grenade1.y<0)
grenade1.reset();if(grenade1.y>grenade1.throwDistance&&grenade1.firedonce==true){grenade1.live=true;grenade1.draw(level);}else if(grenade1.y<=grenade1.throwDistance&&grenade1.firedonce==true){grenade1.live=false;grenade1.explode();grenade1.draw(level);}else if(grenade1.y<=grenade1.throwDistance&&grenade1.firedonce==true&&grenade.exploding==false){}};};function levelUpGame(){if(score<10){level=1;grenade1.levelUp();b1.levelUp();e1.levelUp();gratiicoin.levelUp();p1.levelUp();}else if(score>=10&&score<50){level=2;grenade1.levelUp();b1.levelUp();e1.levelUp();gratiicoin.levelUp();p1.levelUp();}else if(score>=50&&score<100){level=3;grenade1.levelUp();b1.levelUp();e1.levelUp();gratiicoin.levelUp();p1.levelUp();}else if(score>=100&&score<150){level=4;grenade1.levelUp();b1.levelUp();e1.levelUp();gratiicoin.levelUp();p1.levelUp();}else if(score>=150){level=5;grenade1.levelUp();b1.levelUp();e1.levelUp();gratiicoin.levelUp();p1.levelUp();}}
var UI=function(){this.init=function(){this.x=0;this.y=0;this.topUIimage=new Image();this.topUIimage.src='images-space/UI-topbar.png';this.heartImage=new Image();this.heartImage.src="images-space/heart.png";}
this.drawTopUI=function(){ctx.drawImage(this.topUIimage,this.x,this.y);draw.text(level,188,24,18,'#fff44b');draw.text(score,88,24,18,'#d31a00');this.gratiiDistance=272;this.fontSize=18;if(gratii<10){draw.text(gratii,this.gratiiDistance,24,this.fontSize,'#FEFEFE');}else if(gratii>=10&&gratii<100){draw.text(gratii,this.gratiiDistance-10,24,this.fontSize,'#FEFEFE');}else if(gratii>=100&&gratii<1000){draw.text(gratii,this.gratiiDistance-20,24,this.fontSize,'#FEFEFE');}else if(gratii>=1000&&gratii<10000){draw.text(gratii,this.gratiiDistance-30,24,this.fontSize,'#FEFEFE');}else if(gratii>=10000){draw.text(gratii,this.gratiiDistance-40,24,this.fontSize,'#FEFEFE');}};this.drawBottomUI=function(){this.heartStartX=246;this.heartStartY=406;this.heartWidth=24;if(health==1){ctx.drawImage(this.heartImage,this.heartStartX,this.heartStartY);}else if(health==2){ctx.drawImage(this.heartImage,this.heartStartX,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth,this.heartStartY);}else if(health==3){ctx.drawImage(this.heartImage,this.heartStartX,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth*2,this.heartStartY);}else if(health==4){ctx.drawImage(this.heartImage,this.heartStartX-this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth*2,this.heartStartY);}else if(health==5){ctx.drawImage(this.heartImage,this.heartStartX-this.heartWidth*2,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX-this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth*2,this.heartStartY);}else if(health==6){ctx.drawImage(this.heartImage,this.heartStartX-this.heartWidth*3,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX-this.heartWidth*2,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX-this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth,this.heartStartY);ctx.drawImage(this.heartImage,this.heartStartX+this.heartWidth*2,this.heartStartY);}};};function gameStartScreen(){if(instructionScreen==false)
ctx.drawImage(splashPageImage,0,0);if(instructionScreen==true)
ctx.drawImage(instructionPageImage,0,0);}
function loseGame(){if(typeof postScore=='function'){gameOver=true;postScore(gratii);console.log(gratii);}}
var ui=new UI();ui.init();var p1=new Ship();p1.init();var gratiicoin=new GratiiCoin();var grenade1=new Grenade();grenade1.init();var e1=new Enemies();e1.init();var b1=new Bullets();b1.init();var stars=new Stars();stars.init();var scrollingBackground=new ScrollingBackground();scrollingBackground.init();function loop(){if(splashScreen==true){gameStartScreen();}else if(splashScreen==false){draw.clear();scrollingBackground.draw();stars.draw();e1.draw();p1.move();p1.draw();b1.draw();b1.move();if(p1.dead==false&&p1.collides(gratiicoin)){gratii+=1;gratiicoin.relocate();}
gratiicoin.draw();if(score>hiScore){hiScore=score;}
ui.drawTopUI();ui.drawBottomUI();if(health<=0){p1.dead=true;}
if(p1.dead==false){grenade1.move();grenade1.fire();levelUpGame();}
if(p1.dead===true){b1.kill();if(gameOver==false){gameOver=true;loseGame();}}}};splashPageImage=new Image();splashPageImage.src="images-space/splash-page.png";instructionPageImage=new Image();instructionPageImage.src="images-space/instructions-page.png";window.scrollTo(0,0);window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/40);};})();(function animloop(){requestAnimFrame(animloop);loop();})();}());